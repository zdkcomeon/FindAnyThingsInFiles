# Find In Files - uTools 文件内容搜索插件

## 📌 简介

Find In Files 是一款强大的 uTools 插件，用于在指定目录下批量搜索文件内容，并将搜索结果以 Markdown 表格格式输出。适用于代码审查、日志分析、文档查找等多种场景。

## ✨ 主要特性

- 🔍 **全文搜索**：在指定目录及其子目录下搜索包含特定文本的文件
- 📁 **灵活的文件类型过滤**：支持全量搜索或指定文件后缀搜索
- 📊 **结构化输出**：搜索结果以 Markdown 表格格式保存，便于查看和分享
- 🎯 **智能项目识别**：自动识别文件所属项目名称
- 📈 **实时进度显示**：搜索过程中实时显示进度和统计信息
- 💾 **自动保存结果**：搜索结果自动保存到下载目录

## 🚀 安装方法

### 方式一：插件商店安装
1. 打开 uTools
2. 进入插件商店
3. 搜索 "FindAnyThingInFile"
4. 点击安装

### 方式二：开发者模式安装
1. 下载本项目所有文件
2. 打开 uTools 开发者工具
3. 点击"新建插件"，选择项目目录
4. 完成安装

## 📖 使用教程

### 1. 启动插件

打开 uTools，输入以下任一关键词启动插件：
- `find`
- `搜索文件`
- `搜索Java文件`
- `文件内容匹配`

![插件启动界面](./docs/images/launch.png)

### 2. 基本搜索操作

#### 步骤 1：输入搜索内容
在搜索框中输入要查找的文本内容

![搜索输入界面](/docs/images/search-input.png)

#### 步骤 2：选择搜索模式

- **全量文件模式**：搜索所有文本文件（排除二进制文件）
- **自定义后缀模式**：仅搜索指定类型的文件

#### 步骤 3：设置搜索路径
点击"更新目录"按钮选择要搜索的根目录

#### 步骤 4：执行搜索
点击"搜索"按钮开始搜索

### 3. 查看搜索结果

搜索完成后，会弹出完成对话框，提供三个选项：

![搜索完成对话框](./docs/images/search-complete.png)

- **稍后查看**：关闭对话框，稍后手动查找结果文件
- **打开位置**：打开文件所在文件夹并选中结果文件
- **打开文件**：直接用默认 Markdown 编辑器打开结果文件

### 4. 结果文件格式

搜索结果以 Markdown 表格形式保存，包含以下信息：

| 项目名 | 文件名 | 文件类型 | 行号 | 内容 |
| ------ | ------ | -------- | ---- | ---- |
| project1 | Main.java | .java | 15 | public static void main(String[] args) |
| project2 | config.xml | .xml | 8 | <property name="searchText" value="example"/> |


## 🎯 使用场景

### 场景一：代码审查
快速查找项目中所有调用特定方法或包含特定关键词的代码位置。

### 场景二：日志分析
在大量日志文件中搜索错误信息或特定事件。

### 场景三：配置查找
查找所有配置文件中的特定配置项。

### 场景四：文档搜索
在文档库中查找包含特定内容的文档。

## ⚙️ 高级功能

### 自定义文件类型

除了使用预设的常用文件类型外，还可以手动输入自定义后缀：

![自定义文件后缀](./docs/images/custom-extensions.png)

支持的输入格式：
- `.ts,.vue,.go` （推荐）
- `ts,vue,go` （自动补充点号）
- 混合输入：`.ts,vue,.go`

### 搜索状态实时显示

搜索过程中会实时显示：
- 扫描进度
- 已处理文件数
- 已找到的匹配文件数
- 当前处理状态

## 🔧 配置说明

插件会自动保存以下配置：
- **搜索路径**：上次使用的搜索目录
- 配置存储位置：uTools 本地数据库

## ⚠️ 注意事项

1. **文件类型限制**：插件会自动排除以下二进制文件类型：
    - 图片：`.jpg`, `.jpeg`, `.png`, `.gif`, `.bmp`, `.webp`, `.svg`
    - 视频：`.mp4`, `.avi`, `.mov`, `.wmv`, `.flv`, `.mkv`, `.webm`
    - 音频：`.mp3`, `.wav`, `.aac`, `.ogg`, `.flac`
    - 压缩包：`.zip`, `.rar`, `.7z`, `.tar`, `.gz`, `.bz2`, `.xz`
    - 可执行文件：`.exe`, `.dll`, `.so`, `.bin`, `.dat`, `.apk`, `.iso`
    - 办公文档：`.pdf`, `.doc`, `.docx`, `.ppt`, `.pptx`, `.xls`, `.xlsx`

2. **大文件处理**：搜索大量文件时可能需要较长时间，请耐心等待

3. **文件编码**：目前仅支持 UTF-8 编码的文本文件

4. **结果文件命名**：结果文件命名格式为 `search_results_[搜索内容]_[时间戳].md`

## 🛠️ 技术栈

- **前端**：HTML5 + CSS3 + 原生 JavaScript
- **后端**：Node.js (uTools preload)
- **文件系统**：Node.js fs 模块
- **UI 框架**：自定义 CSS 样式

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 开发环境搭建
1. 克隆项目到本地
2. 安装 uTools 开发者工具
3. 在开发者工具中加载项目
4. 修改代码并测试

### 代码结构
```
find_and/
├── index.html          # 主界面
├── index.css           # 样式文件
├── index.js            # 前端逻辑
├── preload.js          # 后端逻辑
├── plugin.json         # 插件配置
├── logo.png           # 插件图标
└── README.md          # 说明文档
```

## 📄 开源协议

MIT License

## 👨‍💻 作者

dongkun

## 💬 反馈与支持

如有问题或建议，请通过以下方式联系：
- 在 uTools 论坛发帖
- 提交 GitHub Issue
- 发送邮件至 [你的邮箱]

## 🙏 致谢

感谢 uTools 提供的优秀插件平台！

---

**快速开始**：打开 uTools → 输入 `find` → 开始搜索！